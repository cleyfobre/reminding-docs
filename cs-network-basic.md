## network basic

### ref: http://www.kmooc.kr/courses/course-v1:SKKUk+SKKU_26+2022_T1/about

### 1-1. 네트워크 개요

- 네트워크란?
  - 여러 노드들이 여러 통신링크로 연결된 덩어리 자체를 의미한다.
  - 노드란 PC, 서버, 라우터, 스위치 등의 장치들을 의미한다.
  - 링크란 유선, 무선 등이 있다.

- 좋은 네트워크란?
  - 성능(Performance): 처리량(Throughput)과 지연시간(Delay)
  - 신뢰(Reliability): 장애빈도, 장애발생 후 회복시간, 견고성 등
  - 보안(Security)

- 링크의 연결 형태
  - 일대일: 오직 일대일로만 연결
    - 예) 내 컴퓨터와 연결된 프린터
  - 멀티포인트(or 멀티드롭): 하나의 연결이 여러 노드에 연결

- 네트워크 토폴로지: "노드와 링크가 어떻게 배치되어 있는가"를 의미
  - 토폴로지는 일반적으로 4가지가 있다. 스타, 버스, 링, 매시 등
  - 스타 형(Star): 각 장치가 중앙장치(Hub)에 일대일 연결되어 통신하는 형태
  - 버스 형(Bus): 하나의 케이블에 여러 장치들이 연결되어 각 신호가 전체에 전달되는 형태
  - 링 형(Ring): 장치들이 링 형태로 서로 연결되어 데이터가 링을 따라 한쪽 방향으로 전달
  - 그물 형(Mesh): 각 장치가 일대일로 연결되어 서로가 일대일 통신하는 형태
  - 일반적인 조직에서는 위의 4가지 네트워크 토폴로지가 다 존재하는 형태다.

- 네트워크 분류
  - LAN(Local Area Network): 보통 한 사무실, 건물, 캠퍼스 등에서 장치들이 서로 연결되며, 개인적으로 소유 가능
  - MAN(Metropolitan Area Network): 도시 정도의 크기를 포함하는 규모
  - WAN(World Area Network): 지역적으로 넓은 범위에서 데이터를 전송하기 위해 구성. 여러 네트워크가 연결되는 경우를 인터넷이라 함. 즉, 인터넷은 네트워크가 서로 연결된 전체 네트워크를 의미하고 규모적인 면에서 WAN에 속한다.

### 1-2. 네트워크 모델과 표준 프로토콜

- 계층화의 개념
  - 네트워크 책에선 계층화라는 것이 항상 나오는데, 그것을 왜 해야하는지 이해해야할 필요가 있다.
  - 사람간 대화도 생각 >> 언어 >> 입과 귀 등을 거쳐 대화를 한다. 즉 계층화가 되어 있다. 내가 만약 귀가 안들리면 보청기를 끼면 된다. 보청기를 낀다고 해서 나의 생각과 언어에 영향을 미치지 않는다. 
  - 마찬가지로 네트워크에도 계층화가 되어 있는데, 통신 과정에 있어서 각 계층을 거치게 되어 있고, 각 계층이 변하더라도 서로 다른 계층에 영향을 미치지 않는다.

- TCP/IP 모델(인터넷 모델이라고도 함): 인터넷의 출현 이후에는 OSI 7계층은 거의 사용하지 않는다.
  - Physical: 물리 계층. 0과 1의 비트들의 나열로 보고 데이터를 그냥 보내는 계층.
  - Data Link: 물리 계층과 다르게 메시지의 형태를 가짐. 에러 제어가 가능.
  - Network: 호스트 to 호스트. 패킷을 최종 목적지로 경로 설정함. (=라우팅)
  - Transport: 프로세스 to 프로세스. 메시지를 세그먼트 단위로 분할 및 조립.
  - Application: HTTP나 FTP 등.

- 표준 프로토콜
  - 데이터를 주고 받는데 이용되는 규칙의 집합
  - De jure: 표준화를 제정하는 기구가 공식적으로 규정된 표준
  - De facto: 이미 많이 이용되고 있어서 사실상 표준

### 2-1. 스위칭 방법과 종류

- 스위칭의 개념
  - 노드와 노드 사이에 링크가 있는데 그것을 임시로 연결해주는 것을 말함.

- 스위칭의 필요성
  - 노드가 여러개면 링크가 더 늘어나기 때문에 돈이 많이 듦.
    - link 갯수 = n(n-1)/2
  - 링크 대다수는 유휴시간이 많음.
  - 이러한 문제를 해결하기 위해 여러 노드가 스위치에 연결되도록 구성

- 스위칭의 종류
  - 회선(Circuit) 교환: 선을 연결하는 방식(기차 레일 필요할 때마다 바뀌는 것처럼)
    - 전화망(PSTN)에서 사용. 전화상에선 서로 말(데이터)을 주고받지 않아도 요금이 나감. 두 사람(노드)말곤 아무도 그 선을 사용할 수 없기 때문.
  - 메시지 교환: 전달할 메시지를 수신하면 인접 노드로 전달.(Store and forward)
    - 메시지 용량이 10GB면 그걸 다 저장해야하는 메모리가 필요.
  - 패킷 교환: 노드가 저장할 수 있는 작은 단위(패킷)로 나눠서 전송. 데이터를 쪼개다보니까 패킷마다 데이터의 순서를 적어놓을 필요가 있음(헤더의 존재 이유)
    - 군집성있는(bursty) 트래픽 전송에 적합
    - 패킷 교환은 데이터그램과 가상회선 방식 두가지로 나뉨.
    - 데이터그램 방식: 그냥 일단 패킷으로 쪼개서 순서와 상관없이 가능한 링크를 통해서 보냄. (패킷이 각자 다른 링크를 통해서 갈 수 있음) 그래서 목적지에선 패킷 순서가 뒤죽박죽일 순 있음. 그러나 가장 효율적인 방식임(놀고 있는 링크를 줄이는 것이니까.)
    - 가상회선 방식: 데이터를 보내기 전에 연결 설정. 동일한 경로로 순서대로 목적지에 도착.
    - 데이터그램 방식과 가상회선 방식을 섞을 수 있음. 데이터 그램 방식에서는 순서 상관없이 최대한의 효율을 높여서 가는 건데, 가상회선을 만들어서 보낼 수도 있음. 그래서 이렇게 보내면 엄밀하게 데이터그램 방식은 아님. 이렇게 쓰는 걸 MPLS라고 함.

- MPLS(Multi Protocol Label Switching)
  - 속도 때문에 데이터그램 방식과 가상회선 방식을 섞어서 씀. 데이터그램은 노드마다 어떤 링크를 타야하나 정해야하기 때문에 시간이 걸림. 가상회선 방식처럼 레이블을 붙여 놓으면 바로바로 링크를 탈 수 있어서 속도가 빠름.
  - 우리가 사용하는 인터넷은 MPLS를 많이 활용함.

### 2-2. 다중 접속(MA, Multiple Access)

- 다중 접속의 개념
  - 친구 간의 대화에도 서로 말이 겹치면 조정이 필요함. 누군가가 말하고 다른 누군가는 들어야 함. 이렇듯 컴퓨터도 여러 컴퓨터가 동시에 하나의 매체에 접근할 때 문제가 생기곤 하는데, 이를 다중 접속이라 함.
  - 데이터링크 계층에서 수행
    - 상위 부계층은 데이터 링크를 제어
    - 하위 부계층은 공유 매체의 접근 문제를 해결

- 다중 접속 프로토콜 종류
  - 무작위 접근(Random Access)
    - 어떤 시스템이 전송할 차례인지 규칙이 없음. 그냥 경쟁(Contention)임.
    - 그래서 충돌(Collision)도 일어날 수 있음.
    - 첨에 무작위 접근을 사용하다가 CSMA라는 것도 만들어지고.
    - 유선이면 CSMA/CD 무선이면 CDMA/CA 등으로 발전도 함.
    - 이것들의 시작은 ALOHA 프로토콜임.(하와이대학교에서 처음 개발됨.)
  - 통제된 접근(Controlled Access)
    - 하나의 시스템이 제어국이 되어 다른 시스템들의 전송 권한을 제어

- 무작위 접근

  - ALOHA
    - 중간에 기지국을 두고 컴퓨터들이 안테나를 달아 기지국에 데이터를 쏨.
    - 여기저기서 쏘니까 Collision이 발생함. 그래서 컴퓨터는 수신자로부터 ACK를 받도록 함. ACK를 받으면 잘 받았음을 알 수 있음.
    - 근데 ACK를 하염없이 기다리는 문제도 생기게 됨.

  - CSMA (Carrier Sense Multiple Access)
    - 그래서 데이터 송신 전에 미리 감지해보기로 함.
    (= Sense before transmit / Listen before talk)
    - 데이터를 보내기 전에 누가 데이터를 보내나 안보내나 감지해본다.
    (= Carrier Frequency가 잡히나 안잡히나 Sensing 해본다.)
    - 그래서 아무도 안보내면 데이터를 보낸다. 근데 이렇게 해도 충돌이 난다.
    - 왜? 음속 때문일 수 있음. 그 찰나에 주파수가 안잡혔을 수도 있음. 센싱할 땐 없다가도 데이터를 보낼 때 갑자기 어디선가 데이터를 보낼 수도 있기 때문.

  - CSMA/CD
    - CSMA에 충돌 감지(Collision Detection)를 추가함. 데이터 보내고 나서 데이터가 깨지는지 안 깨지는지 확인.
    - 혹시라도 깨지면 데이터 전송을 중지하여 채널 사용하지 않도록 만들고, 나중에 다시 보냄

  - CSMA/CA
    - 근데 위 방식은 무선에선 사용하기 어려움. 그래서 아예 충돌을 피하는 방법을 씀.(Collision Avoidance)
    - IFS라고해서 채널이 비어있으면 바로 데이터를 안보내고 잠시 쉼.
    - 또 Centention Window라고해서, 임의의 수만큼 쉼. 
    - 마지막 ACK받는것까지 하면 CSMA/CA의 방식임.

- 통제된 접근
  - 예약: 예약된 사람만 데이터 보낼 수 있음.
  - 폴링: 데이터 있냐고 먼저 물어보고, 보낼거 있다고 하면 데이터 보내게 해줌.
  - 토큰 전달: 토큰 있는 사람만 데이터 보낼 수 있음.

- 채널화
  - 공기든 선이든 나눠서 쓰는 걸 말함.
  - 주파수를 나눠서 사용하면 FDMA라고 하고, (Frequency Division)
  - 시간을 나눠서 사용하면 TDMA라고 함. (Time Division)
  - 코드를 나눠서 사용하면 CDMA라고 함. (Code Division)

### 3-1. LAN(Local Area Network)에서 사용하는 매체

- 매체의 개념
  - 데이터는 송신자와 수신자 사이에서 움직이는데, 이런 데이터를 전달해주는 무언가를 통틀어서 매체라고 함.
  - 매체 (= 전송매체, Transmission media)

- 매체의 구분
  - 선이 있는 매체: 유선 (혹은 유도체, 유도매체, Guided media)
    - 컴퓨터와 프린터 사이에 연결된 케이블선은 데이터가 케이블선이 유도하는 방향대로 움직임.
    - 예: 꼬임선(Twisted-apir cable), 동축케이블(Coaxial cable), 
    광케이블(광섬유케이블, fiber-opti cable) 등
  - 선이 없는 매체: 무선 (혹은 비유도체, 비유도매체, Unguided media)
    - 사람이 공기중에 말하면 그 주변 사람들은 누구나 들을 수 있음. 데이터가 어느 유도된 방향대로 움직이지 않음.
    - 예: 공기

- 유도매체
  - 꼬임선(Twisted-pair cable, 'TP케이블' 구글 이미지 검색 고)
    - 안 쪽이 두갈래로 배배꼬여있음.
    - 보통 랜선 안에 이런식으로 되어 있음.
    - UTP(Unshielded TP): 쉴드가 안쳐저 있다. 즉, 위부 잡음으로부터 막아주도록 차폐되어 있지 않으면 UTP.
    - STP(Shielded TP): 쉴드가 쳐저 있으면 STP.
    - 원래 차폐시키는 공정이 더 들어가니까 STP가 비쌌는데, 요즘엔 UTP도 많이 좋아지고 원래 더 싸니까 많이 쓴다고 함.
    - UTP 카테고리: 그냥 품질 카테고리가 있는데, UTP선 겉에 쓰여져 있다고 함. 품질이 좋다는 건 지원속도와 사용 환경의 차이를 나타냄.
    - TP 커넥터: UTP 케이블을 컴퓨터나 통신장치, 네트워크 장치에 연결하려면 커넥터가 필요함. 흔히 랜선에서 가장 많이 쓰는게 RJ(Registered Jack)45이고, 구글 이미지 검색 고. (랜선 대가리 부분을 말함.)
  - 동축 케이블(Coaxial cable)
    - 요즘은 다 집에서 IPTV 보는데 예전에 케이블 TV 시절에는 다 동축 케이블이 연결되어 있었음. 
    - TP보다 주파수를 수용하는 용량이 커서 고속으로 신호를 전송할 순 있었는데, 거리가 멀수록 신호의 감쇄가 심해지는 단점이 있음. 그래서 광케이블로 많이 넘어간 상태임.
    - 요즘엔 UTP나 광케이블 등을 많이 쓰지 동축은 거의 안씀. LAN을 사용하는 통신 형태에서는 보기가 힘듦.
  - 광케이블
    - UTP, STP, 동축 처럼 전기적 신호를 사용하는게 아니라, 빛이라는 신호를 사용해서 열도 안나고 잡음에도 덜 민감하고 속도도 빠름. 외부로부터 침입도 어려움. 
    - 대신 연결이 어렵고, 비쌈.
    - 광케이블은 코어가 있고, 그 주변에 클레딩으로 감싸져 있는데, 코어에 빛을 쏘면 그것이 클레딩에 계속 튕겨져 나가면서 목적지까지 전달됨.
    - SC 커넥터, ST커넥터, RJ-45커넥터 같이 생긴 MT-RJ 등등 종류가 있음.

- 비유도매체
  - 공기에다가 주파수를 쏨.
  - 주파수가 높을 수록, 직진성이 강해짐
  - 주파수가 낮을 수록, 직진성이 약해짐
  - 라디오파(Radio Wave)는 주파수가 낮아 직진성이 약하여 다방향성으로 흩어짐.
  - 마이크로파(Micro Wave)는 주파수가 높고 직진성이 강해서 데이터를 서로 주고받는데 사용됨.

### 3-2. 유선 LAN의 표준, 이더넷(Ethernet)

- 이더넷
  - 이더넷은 예전에 복사기 만드는 Xerox라는 회사의 한 연구원이 사내용으로 만들었던 네트워크였는데 이게 나중에 미국 전역에서 쓰고자 인텔, DE 와 협업을 해서 완성을 시키고, ISO에서 표준화로 지정하게 되어 지금까지도 사용중이다.
  - 이더넷은 매체를 공유하는 환경에서 어떻게 데이터를 보낼까?라는 고민에서 시작됨.
  - 데이터링크 계층에서는 LLC와 MAC 두 계층으로 나뉨.
  - IEEE에선 옛날에 만들어진 이더넷을 개선 시킬 필요성을 느껴서 표준을 연구하는 위원회(워킹그룹)를 따로 두게됨. 보통 워킹그룹의 이름은 802.3z, 802.2 이런식으로 정해졌는데 해당 그룹에서 만든 프로토콜의 이름과 동의어처럼 쓰이기도 함. 예를 들어, 아까 언급한 LLC는 IEEE 802.2라고도 하고, CSMA/CD 프로토콜은 IEEE 802.3라고 해도 됨. 동의어임.
  - 이더넷의 속도는 맨 처음 10Mbps에서 10Gbps까지 발전.
  - 이더넷 프레임 (MAC 프레임)
    - 7개의 필드로 구성.
    - Preamble, SFD, DA, SA, Length/Type, Data, CRC
      - Preable: 프레임이 곧 도착하니 준비해라
      - SFD: Start Frame Delimiter, 프레임의 시작을 알림
      - DA: Destination Address 목적지 주소
      - SA: Source Address 송신자 주소
      - Length/Type: 데이터 필드의 길이나 네트워크 계층 프로토콜의 종류
      - Data: 최소 46byte에서 최대 1500byte까지의 데이터
      - CRC: 에러를 검출하는 기능
  - 주소 지정
    - 각 시스템엔 NiC(혹은 LAN 카드라고도 불림)이 있는데, LAN 카드에는 고유 주소가 있음. 보통 MAC주소, 이더넷주소, 하드웨어 주소 등으로 불림.
    - 총 6byte의 형태임.(ex. 60:01:02:01:2C:4B)
  - MAC 프로토콜: CSMA/CD
    - 이더넷은 1-persitent CSMA/CD를 사용. 누군가 데이터를 보내고 있으면 그걸 다 듣고 있다가 송신이 끝나면 데이터를 보냄.