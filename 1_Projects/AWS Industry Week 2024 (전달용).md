#awsindustryweek #awsindustryweek2024 #aws 

### <우아한 형제들> 비용 관리 인식 및 FinOps

사내 IT 보안과 관련해서는 많은 회사에서 개발자 뿐만 아니라 전 직원들이 중요하게 생각하는 문화가 많아진 듯 합니다. IT 인프라 비용도 마찬가지입니다. IT 인프라를 담당하는 개발자 뿐만 아니라 전 직원이 관심을 가지는 문화가 필요합니다. 이를 위해선 모든 직원이 접근 가능한 통합된 대시보드를 제공하여 누구나 언제든지 모니터링할 수 있는 환경을 만드는 것이 중요합니다.

- **AWS Cloud Intelligence Dashboards(AWS CID)**
    
    - AWS에서 제공하는 비용 관리 대시보드 솔루션입니다. 아래 튜토리얼 및 데모 링크를 참고하세요.
    - 튜토리얼 및 데모
        - [https://cid.workshops.aws.dev/demo](https://cid.workshops.aws.dev/demo)
        - [https://catalog.workshops.aws/awscid/en-US](https://catalog.workshops.aws/awscid/en-US)
- FinOps 구축 과정
    
    - 1단계: 성숙도 진단 및 개발 능력 파악, RI/SP 교육 등을 진행합니다.
    - 2단계: 현재 및 목표 비용 파악, 단일 지표 선정 등이 필요합니다.
    - 3단계
        - 각 개발팀이 각각의 KPI 기준으로 여러 지표를 FinOps 팀이 받도록 합니다.
        - 각 팀에서는 책임감을 가지고 이를 수행합니다.
        - 이후 모든 팀으로부터 지표들을 수집받아 통합 보고서를 만들어 각 팀들에게 전달합니다. 우아한 형제들은 [**Splunk](https://www.splunk.com/ko_kr)** 솔루션을 사용했다고 하네요. 통합된 보고서에는 아래와 같은 요소들이 포함됩니다.
            - ‘비용 최적화 TOP5’와 같은 랭킹 표시
            - 비용 히스토리 및 추세
            - 각 AWS 서비스별 비용 대시보드
- 우아한 형제들 전사 사례
    
    - EC2 Scale In/Out: 주문이 많고 적을 때 유연하게 인스턴스를 사용하여 비용을 최적화했다는 사례가 있다고 합니다.

### <하림그룹 선진> AI 기반 공정 제어

하림그룹사 선진은 축산, 비료 등의 상품을 제조, 판매하는 회사입니다. 최근 경쟁력이 약화되면서 품질을 올리고 생산비를 낮추기 위해 AI를 도입한 선진 스마트 팩토리(SSTP) 프로젝트를 진행했습니다.

1. GroundTruth
    1. 회사에서 다루는 데이터의 특징을 먼저 파악하는 것이 필요합니다.
    2. 사료 데이터는 환경(온도, 습도), 공정, 공장, 배합비, 제품 유형 등 영향을 많이 받는 특징이 있습니다.
2. 클라우드 아키텍쳐 구축
    1. AWS와 함께 AI모델 개발 및 MLOps 구축하는 프로젝트를 진행했습니다.
    2. 데이터레이크 구축하고 Step Functions 기반 파이프라인 자동화를 구축했습니다.
3. 결과
    1. 현장 데이터를 이용하여 자체 AI 모델을 거쳐 최적의 사료 배합비 제조를 위한 데이터를 만들어 냅니다. 결과물은 대시보드로 전달합니다.
    2. 현장 작업자들은 대시보드를 보고 어떻게 배합을 할지 판단합니다.
    3. 배합 전 Rule 검증자 넣습니다. AI 모델을 확실히 믿을 수 있을 때가지 해당 과정을 넣습니다.
    4. 구축 당시 개발자들이 부족한 상황에서 Step Functions 은 아주 유용한 솔루션이었습니다. 구축 시기에는 일이 많았으나, 운영 시기에는 많은 안정감을 주었습니다.
    5. 시간당 생산량, 품질 편차 등 많은 지표가 개선되었습니다.

### <스타벅스> 온프레미스에서 클라우드 마이그레이션 과정

스타벅스는 아래와 같이 서비스를 이관하였습니다.

1. 온프레미스
2. 레거시 마이그레이션
3. 클라우드 네이티브 앱

초반에는 온프레미스, 레거시 마이그레이션 그리고 클라우드 네이티브 앱의 비율이 8:1:1 이었다면 이후 5:3:2, 최종적으로 0:0:10을 목표로 일하고 있는 중입니다.

앱 현대화를 위해서는 기술, 문화 그리고 비용 측면이 강조됩니다.

- 기술
    - MSA, DDD, 이벤트 드리븐 아키텍처 등등 많은 컨퍼런스에서 강조하는 패턴 등을 강조합니다.
- 문화
    - CCOE를 통한 앱 현대화를 위한 문화를 개선합니다.
    - 어플리케이션 엔지니어링이 엔지니어링, 오퍼레이션 모두를 감당 하는 문화를 위해 노력합니다.
- 비용
    - 앱 현대화의 안정화 이후 FinOps 체계 수립을 위해 노력합니다.
    - AWS QuickSight (Business Interlligence)와 같은 대시보드를 구성원들 모두 보여줌으로써 비용에 대한 관심을 촉구합니다.

개발자들은 비즈니스를 이해할 필요가 있으며 모든 팀들의 컨센서스 필요합니다. 기술조직의 개발만으론 앱 현대화는 불가능합니다. 현대화는 단기간에 진행되지 않습니다.

### 개인적인 소감

매년 혹은 2년에 한번 씩 AWS가 미는 건지 트렌드가 바뀌는 건진 몰라도 세션마다 강조하는 것들이 비슷하다는 느낌을 받았습니다. 작년까지만 해도, 데이터 레이크와 이벤트 드리븐 아키텍쳐 등을 많이 강조했었는데요. (AWS 컨퍼런스 뿐만 아니라 토스, 우아한형제들 등등 빅테크 기업에서 열리는 행사 주제 대부분 비슷했습니다.) 이젠 이 주제에 대해 이야기하면 조금 뻔하다고 느낄 정도입니다. 작년까지는 AWS 관련 행사에서 대부분 데이터 레이크 구축을 위해 Athena, Glue, S3 조합의 아키텍쳐를 많이 홍보했었는데요. 올해는 Step Functions 를 많이 강조하는 느낌입니다. 미는 건 한번 써보면 좋을 것 같습니다. (그냥 연습삼아서 라도요…) 또 세션 불문 FinOps도 많이 강조하는 느낌이었습니다. 근데 작은 회사에서는 사치인 것 같습니다. 당연히 전체 임직원이 참여하면 좋겠지만, 일반적으론 “잘은 모르겠지만, 개발팀에서 알아서 비용줄여라.”만 아니면 상당히 좋은 문화라고 생각합니다.